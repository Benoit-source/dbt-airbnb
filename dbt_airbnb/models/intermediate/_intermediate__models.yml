version: 2

models:
  - name: int_dt_location
    description: '{{ doc("int_dt_location") }}'
    columns:
      - name: id
        tests:
          - not_null
          - unique

  - name: int_tab_location
    description: '{{ doc("int_tab_location") }}'
    constraints:
      - type: primary_key
        columns: [id]
    columns:
      - name: id
        description: '{{ doc("int_tab_location_id") }}'
        tests:
          - not_null
          - unique
      - name: code_ville
        description: '{{ doc("int_tab_location_code_ville") }}'

  - name: int_f_review
    description: '{{ doc("int_f_review") }}'
    constraints:
      - type: primary_key
        columns: [id]
      - type: foreign_key
        columns: [listing_id]
        to: ref('int_tab_location')
        to_columns: [id]
    columns:
      - name: id
        description: '{{ doc("int_f_review_id") }}'
        tests:
          - not_null

  - name: int_tab_inc_location
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - id
              - code_price
    description: '{{ doc("int_tab_inc_location") }}'
    constraints:
      - type: primary_key
        columns: ['ID', 'CODE_PRICE']
    columns:
      - name: id
        tests:
          - not_null
          - unique